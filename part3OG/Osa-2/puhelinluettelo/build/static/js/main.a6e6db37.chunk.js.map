{"version":3,"sources":["Numbers.js","Filter.js","PersonForm.js","services/info.js","Notification.js","App.js","index.js"],"names":["Numbers","people","deletion","map","person","name","number","onClick","id","Filter","filtering","changeFilter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseURL","axios","get","then","response","data","newObject","post","put","console","log","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","service","initialPeople","showMessage","setTimeout","peopleToShow","filter","x","toLowerCase","includes","event","preventDefault","target","find","personObject","window","confirm","returnedPerson","concat","catch","e","error","toDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a6e6db37.chunk.js","sourcesContent":["\r\nconst Numbers = ({people, deletion}) => {\r\n    return (\r\n        <div>\r\n            {people.map(person => {\r\n                return (\r\n                    <p key={person.name}>{person.name} {person.number} <button onClick={() => deletion(person.id)}>delete</button> </p>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Numbers","import React from 'react'\r\n\r\nconst Filter = ({ filtering, changeFilter }) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                set a filter: <input value={filtering} onChange={changeFilter} />\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter","\r\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseURL = \"/api/persons\"\r\n\r\nconst getAll = () => {\r\n    const request  = axios.get(baseURL)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseURL, newObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseURL}/${id}`, newObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst deletion = id => {\r\n    console.log(\"Deleteting ID\", id)\r\n    const request = axios.delete(`${baseURL}/${id}`)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n//NOTE! Browser shows a warning even though this was done exactly like in the material\r\nexport default { getAll, create, update, deletion }","\r\nconst Notification = ({message}) => {\r\n    if(message === \"\"){\r\n        return null\r\n    }\r\n    return (\r\n        <div className=\"notification\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport './index.css'\r\nimport Numbers from \"./Numbers.js\"\r\nimport Filter from \"./Filter.js\"\r\nimport PersonForm from \"./PersonForm.js\"\r\nimport service from \"./services/info.js\"\r\nimport Notification from \"./Notification.js\"\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState(\"\")\r\n  const [ filtering, setFilter ] = useState(\"\")\r\n  const [ errorMessage, setErrorMessage ] = useState(\"\")\r\n \r\n  useEffect(() => {\r\n    service\r\n      .getAll()\r\n      .then(initialPeople => {\r\n        setPersons(initialPeople)\r\n      })\r\n  }, [])\r\n\r\n  const showMessage = message => {\r\n    setErrorMessage(message)\r\n    setTimeout(() => {\r\n      setErrorMessage(\"\")\r\n    }, 5000)\r\n  }\r\n  \r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = persons.find(x => x.name === newName)\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    if(person){\r\n      if(window.confirm(`${person.name} is already in the list. Do you want to change the phone number?`)){\r\n        service.update(person.id, personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.map(x => x.id !== person.id ? x : returnedPerson))\r\n        })\r\n        showMessage(`${newName}'s numbers has been changed to ${newNumber}`)\r\n      }\r\n    } else {\r\n      service.create(personObject).then(response => {\r\n      setPersons(persons.concat(response))\r\n      showMessage(`${personObject.name} has been added`)\r\n    })\r\n    .catch(e => {\r\n      showMessage(e.response.data.error)\r\n\r\n    })\r\n  }\r\n  setNewName(\"\")\r\n  setNewNumber(\"\")\r\n}\r\n\r\n  const changeFilter = (event) => {\r\n    event.preventDefault()\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  \r\n  const handelNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  //Chaining needed. Otherwise promise might not fulfill before\r\n  //new people are fetched\r\n  const deletePerson = id => {\r\n    const toDelete = persons.find(x => x.id === id).name\r\n    if(!window.confirm(`Do you want to delete ${toDelete}`)){\r\n      return\r\n    }\r\n    service.deletion(id)\r\n    .then(() => service\r\n    .getAll().then(x => setPersons(x)))\r\n    .catch(e => {\r\n      showMessage(\"Already deleted\")\r\n    })\r\n    .catch(e => console.log(e))\r\n    showMessage(`${toDelete} successfully deleted`)\r\n  }\r\n\r\n\r\n  const peopleToShow = (filtering === \"\")\r\n  ? persons\r\n  : persons.filter(x => x.name.toLowerCase().includes(filtering.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage} />\r\n      <Filter filtering={filtering} changeFilter={changeFilter} />\r\n      <h2>Add a new person</h2>\r\n      <PersonForm addPerson={addPerson}\r\n        newName={newName} handleNameChange={handleNameChange}\r\n        newNumber={newNumber} handleNumberChange={handelNumberChange}\r\n        />\r\n      <h2>Numbers</h2>\r\n      <Numbers people={peopleToShow} deletion={deletePerson} />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}